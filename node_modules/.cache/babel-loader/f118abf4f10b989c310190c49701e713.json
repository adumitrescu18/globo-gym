{"ast":null,"code":"import _classCallCheck from\"/Users/andrei/SublimeWorkspace/final-project-globo-gym/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/andrei/SublimeWorkspace/final-project-globo-gym/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/andrei/SublimeWorkspace/final-project-globo-gym/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/andrei/SublimeWorkspace/final-project-globo-gym/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{Marker,Map,GoogleApiWrapper,StandaloneSearchBox}from\"google-maps-react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var HazardsMap=/*#__PURE__*/function(_Component){_inherits(HazardsMap,_Component);var _super=_createSuper(HazardsMap);function HazardsMap(props){var _this;_classCallCheck(this,HazardsMap);_this=_super.call(this,props);_this.onMapClick=function(t,map,coord){if(Object.keys(_this.state.markers).length%2==0){var lat1=coord.latLng.lat();var lng1=coord.latLng.lng();var myLatlng=new _this.props.google.maps.LatLng(lat1,lng1);var marker=new _this.props.google.maps.Marker({position:myLatlng,title:_this.state.markers.hasOwnProperty(0)?\"End\":\"Start\",map:map,id:_this.state.hazardId});_this.state.hazardId+=1;_this.state.markers[marker.id]=marker;}else if(Object.keys(_this.state.markers).length%2==1){var _lat=coord.latLng.lat();var _lng=coord.latLng.lng();var myLatlng=new _this.props.google.maps.LatLng(_lat,_lng);var marker=new _this.props.google.maps.Marker({position:myLatlng,title:_this.state.markers.hasOwnProperty(0)?\"End\":\"Start\",map:map,id:_this.state.hazardId});_this.state.hazardId+=1;_this.state.markers[marker.id]=marker;console.log(_this.state);var coordsStart={lat:_this.state.markers[_this.state.hazardId-2].getPosition().lat(),lng:_this.state.markers[_this.state.hazardId-2].getPosition().lng()};var coordsEnd={lat:_this.state.markers[_this.state.hazardId-1].getPosition().lat(),lng:_this.state.markers[_this.state.hazardId-1].getPosition().lng()};var directionsService=new _this.props.google.maps.DirectionsService();var directionsDisplay=new _this.props.google.maps.DirectionsRenderer();//put directions renderer to render in the map\ndirectionsDisplay.setMap(map);//     //changing  request\nvar request={origin:coordsStart,waypoints:[],destination:coordsEnd,travelMode:\"WALKING\"};var tempLocation={\"start\":coordsStart,\"end\":coordsEnd};var serverParams={\"creator\":\"Andrei\",\"location\":tempLocation,\"type\":\"construction\",\"description\":\"there is a lot of construction causing a back up\"};var serverRequest={method:\"POST\",headers:{'Content-Type':'application/json'},body:JSON.stringify(serverParams)};// //creating new directions request\nif(_this.state.coords[0]!==null&&_this.state.coords[1]!==null){directionsService.route(request,function(result,status){if(status==\"OK\"){directionsDisplay.setDirections(result);}});fetch(\"http://localhost:8080/api/reports\",serverRequest).then(function(response){return response.json();}).then(function(data){return console.log(\"andrei\",data);});}}console.log(Object.keys(_this.state.markers).length);};_this.state={coords:[],waypoints:[],markers:{},hazardId:0};return _this;}_createClass(HazardsMap,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Map,{className:\"map\",initialCenter:{lat:42.354310,lng:-71.091311},google:this.props.google,onClick:this.onMapClick,onReady:this.onMapReady,style:{width:\"85%\",height:\"100%\",position:\"fixed\"},containerStyle:{position:\"fixed\",width:\"100%\",height:\"90%\",marginTop:\"10vh\"},zoom:15}),/*#__PURE__*/_jsx(\"div\",{className:\"pac-card\",id:\"pac-card\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{id:\"title\",children:\"Add new point\"}),/*#__PURE__*/_jsx(\"div\",{id:\"pac-container\",children:/*#__PURE__*/_jsx(\"input\",{id:\"pac-input\",type:\"text\",placeholder:\"Enter a location\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"pac-card\",id:\"pac-card2\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{id:\"title2\",children:\"Add new point\"}),/*#__PURE__*/_jsx(\"div\",{id:\"pac-container2\",children:/*#__PURE__*/_jsx(\"input\",{id:\"pac-input2\",type:\"text\",placeholder:\"Enter a location\"})})]})}),/*#__PURE__*/_jsx(\"div\",{style:{width:500,height:500},id:this.props.id}),/*#__PURE__*/_jsxs(\"div\",{id:\"infowindow-content\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"\",width:\"16\",height:\"16\",id:\"place-icon\"}),/*#__PURE__*/_jsx(\"span\",{id:\"place-name\",className:\"title\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{id:\"place-address\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{id:\"place-coord\"})]})]});}}]);return HazardsMap;}(Component);export default GoogleApiWrapper({apiKey:'AIzaSyBAVWVu8_U0FfwgBiHVN3q-G5uCQNBAj7Y'})(HazardsMap);","map":{"version":3,"sources":["/Users/andrei/SublimeWorkspace/final-project-globo-gym/src/components/HazardsMap.js"],"names":["React","Component","Marker","Map","GoogleApiWrapper","StandaloneSearchBox","HazardsMap","props","onMapClick","t","map","coord","Object","keys","state","markers","length","lat1","latLng","lat","lng1","lng","myLatlng","google","maps","LatLng","marker","position","title","hasOwnProperty","id","hazardId","console","log","coordsStart","getPosition","coordsEnd","directionsService","DirectionsService","directionsDisplay","DirectionsRenderer","setMap","request","origin","waypoints","destination","travelMode","tempLocation","serverParams","serverRequest","method","headers","body","JSON","stringify","coords","route","result","status","setDirections","fetch","then","response","json","data","onMapReady","width","height","marginTop","apiKey"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Marker, Map, GoogleApiWrapper, StandaloneSearchBox } from \"google-maps-react\";\n\nexport class HazardsMap extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n     coords : [],\n      waypoints : [],\n      markers: {},\n      hazardId: 0,\n    };\n  }\n\n    onMapClick = (t, map, coord) => {\n\n        if (Object.keys(this.state.markers).length %2 == 0) {\n          const lat1 = coord.latLng.lat();\n          const lng1 = coord.latLng.lng();\n  \n          var myLatlng = new this.props.google.maps.LatLng(lat1,lng1);\n          var marker = new this.props.google.maps.Marker({\n              position: myLatlng,\n              title: this.state.markers.hasOwnProperty(0) ? \"End\" : \"Start\",\n              map: map,\n              id: this.state.hazardId,\n          });\n          this.state.hazardId += 1;\n          \n          \n          this.state.markers[marker.id] = marker;\n\n          }\n          else if (Object.keys(this.state.markers).length %2 == 1) {\n            const lat1 = coord.latLng.lat();\n            const lng1 = coord.latLng.lng();\n    \n            var myLatlng = new this.props.google.maps.LatLng(lat1,lng1);\n            var marker = new this.props.google.maps.Marker({\n                position: myLatlng,\n                title: this.state.markers.hasOwnProperty(0) ? \"End\" : \"Start\",\n                map: map,\n                id: this.state.hazardId,\n            });\n            this.state.hazardId += 1;\n          \n          \n            this.state.markers[marker.id] = marker;\n            console.log(this.state)\n            const coordsStart = {\n              lat: this.state.markers[this.state.hazardId-2].getPosition().lat(),\n              lng: this.state.markers[this.state.hazardId-2].getPosition().lng(),\n            };\n\n            const coordsEnd = {\n              lat: this.state.markers[this.state.hazardId-1].getPosition().lat(),\n              lng: this.state.markers[this.state.hazardId-1].getPosition().lng(),\n            };\n\n\n            const directionsService = new this.props.google.maps.DirectionsService();\n            const directionsDisplay = new this.props.google.maps.DirectionsRenderer();\n            //put directions renderer to render in the map\n            directionsDisplay.setMap(map);\n\n        //     //changing  request\n            const request = {\n              origin: coordsStart,\n              waypoints: [],\n              destination: coordsEnd,\n              travelMode: \"WALKING\",\n            };\n            const tempLocation = {\"start\" : coordsStart, \"end\": coordsEnd};\n            const serverParams = {\n              \"creator\" : \"Andrei\",\n              \"location\" : tempLocation,\n              \"type\" : \"construction\",\n              \"description\" : \"there is a lot of construction causing a back up\"\n\n            }\n            const serverRequest = {\n              method : \"POST\",\n              headers: { 'Content-Type': 'application/json' },\n              body : JSON.stringify(serverParams)\n\n            }\n            // //creating new directions request\n            if (this.state.coords[0] !== null &&this.state.coords[1] !== null) {\n                directionsService.route(request, function (result, status) {\n                    if (status == \"OK\") {\n                        directionsDisplay.setDirections(result);\n                    }\n                });\n                fetch(\"http://localhost:8080/api/reports\", serverRequest)\n                .then(response => response.json())\n                .then(data => console.log(\"andrei\", data))\n            }\n          }\n        \n        console.log(Object.keys(this.state.markers).length);\n    };\n  \n  \n    render() {\n  \n      return (\n        <div>\n          <Map\n            className=\"map\"\n            initialCenter={{ lat: 42.354310, lng: -71.091311 }}\n            google={this.props.google}\n            onClick={this.onMapClick}\n            onReady={this.onMapReady}\n            style={{width: \"85%\", height: \"100%\", position: \"fixed\"}}\n            containerStyle={{position: \"fixed\", width: \"100%\", height:\"90%\", marginTop:\"10vh\"}}\n            zoom={15}\n          >\n          </Map>\n          <div className=\"pac-card\" id=\"pac-card\">\n            <div>\n              <div id=\"title\">Add new point</div>\n  \n              <div id=\"pac-container\">\n                <input\n                  id=\"pac-input\"\n                  type=\"text\"\n                  placeholder=\"Enter a location\"\n                />\n              </div>\n            </div>\n          </div>\n          <div className=\"pac-card\" id=\"pac-card2\">\n            <div>\n              <div id=\"title2\">Add new point</div>\n  \n              <div id=\"pac-container2\">\n                <input\n                  id=\"pac-input2\"\n                  type=\"text\"\n                  placeholder=\"Enter a location\"\n                />\n              </div>\n            </div>\n          </div>\n          <div style={{ width: 500, height: 500 }} id={this.props.id} />\n          <div id=\"infowindow-content\">\n            <img src=\"\" width=\"16\" height=\"16\" id=\"place-icon\" />\n            <span id=\"place-name\" className=\"title\"></span>\n            <br />\n            <span id=\"place-address\"></span>\n            <br />\n            <span id=\"place-coord\"></span>\n          </div>\n        </div>\n      );\n    }\n  }\n\nexport default GoogleApiWrapper({\n  apiKey: 'AIzaSyBAVWVu8_U0FfwgBiHVN3q-G5uCQNBAj7Y'\n})(HazardsMap);"]},"metadata":{},"sourceType":"module"}