{"ast":null,"code":"var _jsxFileName = \"/Users/andrei/SublimeWorkspace/final-project-globo-gym/src/components/HazardsMap.js\";\nimport React, { Component } from \"react\";\nimport { Marker, Map, GoogleApiWrapper, StandaloneSearchBox } from \"google-maps-react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport class HazardsMap extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onMapClick = (t, map, coord) => {\n      if (Object.keys(this.state.markers).length % 2 == 0) {\n        const lat1 = coord.latLng.lat();\n        const lng1 = coord.latLng.lng();\n        var myLatlng = new this.props.google.maps.LatLng(lat1, lng1);\n        var marker = new this.props.google.maps.Marker({\n          position: myLatlng,\n          title: this.state.markers.hasOwnProperty(0) ? \"End\" : \"Start\",\n          map: map,\n          id: this.state.hazardId\n        });\n        this.state.hazardId += 1;\n        this.state.markers[marker.id] = marker;\n      } else if (Object.keys(this.state.markers).length % 2 == 1) {\n        const lat1 = coord.latLng.lat();\n        const lng1 = coord.latLng.lng();\n        var myLatlng = new this.props.google.maps.LatLng(lat1, lng1);\n        var marker = new this.props.google.maps.Marker({\n          position: myLatlng,\n          title: this.state.markers.hasOwnProperty(0) ? \"End\" : \"Start\",\n          map: map,\n          id: this.state.hazardId\n        });\n        this.state.hazardId += 1;\n        this.state.markers[marker.id] = marker;\n        console.log(this.state);\n        const coordsStart = {\n          lat: this.state.markers[this.state.hazardId - 2].getPosition().lat(),\n          lng: this.state.markers[this.state.hazardId - 2].getPosition().lng()\n        };\n        const coordsEnd = {\n          lat: this.state.markers[this.state.hazardId - 1].getPosition().lat(),\n          lng: this.state.markers[this.state.hazardId - 1].getPosition().lng()\n        };\n        const directionsService = new this.props.google.maps.DirectionsService();\n        const directionsDisplay = new this.props.google.maps.DirectionsRenderer(); //put directions renderer to render in the map\n\n        directionsDisplay.setMap(map); //     //changing  request\n\n        const request = {\n          origin: coordsStart,\n          waypoints: [],\n          destination: coordsEnd,\n          travelMode: \"WALKING\"\n        };\n        const tempLocation = {\n          \"start\": coordsStart,\n          \"end\": coordsEnd\n        };\n        const serverParams = {\n          \"creator\": \"Andrei\",\n          \"location\": tempLocation,\n          \"type\": \"construction\",\n          \"description\": \"there is a lot of construction causing a back up\"\n        };\n        const serverRequest = {\n          method: \"POST\",\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(serverParams)\n        }; // //creating new directions request\n\n        if (this.state.coords[0] !== null && this.state.coords[1] !== null) {\n          directionsService.route(request, function (result, status) {\n            if (status == \"OK\") {\n              directionsDisplay.setDirections(result);\n            }\n          });\n          fetch(\"http://localhost:8080/api/reports\", serverRequest).then(response => response.json()).then(data => console.log(\"andrei\", data));\n        }\n      }\n\n      console.log(Object.keys(this.state.markers).length);\n    };\n\n    this.state = {\n      coords: [],\n      waypoints: [],\n      markers: {},\n      hazardId: 0\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Map, {\n        className: \"map\",\n        initialCenter: {\n          lat: 42.354310,\n          lng: -71.091311\n        },\n        google: this.props.google,\n        onClick: this.onMapClick,\n        onReady: this.onMapReady,\n        style: {\n          width: \"85%\",\n          height: \"100%\",\n          position: \"relative\"\n        },\n        containerStyle: {\n          position: \"fixed\",\n          width: \"100%\",\n          height: \"90%\",\n          marginTop: \"10vh\"\n        },\n        zoom: 15\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: 500,\n          height: 500\n        },\n        id: this.props.id\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"infowindow-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"\",\n          width: \"16\",\n          height: \"16\",\n          id: \"place-icon\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          id: \"place-name\",\n          className: \"title\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          id: \"place-address\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          id: \"place-coord\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }, this);\n  }\n\n}\nexport default GoogleApiWrapper({\n  apiKey: 'AIzaSyBAVWVu8_U0FfwgBiHVN3q-G5uCQNBAj7Y'\n})(HazardsMap);","map":{"version":3,"sources":["/Users/andrei/SublimeWorkspace/final-project-globo-gym/src/components/HazardsMap.js"],"names":["React","Component","Marker","Map","GoogleApiWrapper","StandaloneSearchBox","HazardsMap","constructor","props","onMapClick","t","map","coord","Object","keys","state","markers","length","lat1","latLng","lat","lng1","lng","myLatlng","google","maps","LatLng","marker","position","title","hasOwnProperty","id","hazardId","console","log","coordsStart","getPosition","coordsEnd","directionsService","DirectionsService","directionsDisplay","DirectionsRenderer","setMap","request","origin","waypoints","destination","travelMode","tempLocation","serverParams","serverRequest","method","headers","body","JSON","stringify","coords","route","result","status","setDirections","fetch","then","response","json","data","render","onMapReady","width","height","marginTop","apiKey"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Marker, Map, GoogleApiWrapper, StandaloneSearchBox } from \"google-maps-react\";\n\nexport class HazardsMap extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n     coords : [],\n      waypoints : [],\n      markers: {},\n      hazardId: 0,\n    };\n  }\n\n    onMapClick = (t, map, coord) => {\n\n        if (Object.keys(this.state.markers).length %2 == 0) {\n          const lat1 = coord.latLng.lat();\n          const lng1 = coord.latLng.lng();\n  \n          var myLatlng = new this.props.google.maps.LatLng(lat1,lng1);\n          var marker = new this.props.google.maps.Marker({\n              position: myLatlng,\n              title: this.state.markers.hasOwnProperty(0) ? \"End\" : \"Start\",\n              map: map,\n              id: this.state.hazardId,\n          });\n          this.state.hazardId += 1;\n          \n          \n          this.state.markers[marker.id] = marker;\n\n          }\n          else if (Object.keys(this.state.markers).length %2 == 1) {\n            const lat1 = coord.latLng.lat();\n            const lng1 = coord.latLng.lng();\n    \n            var myLatlng = new this.props.google.maps.LatLng(lat1,lng1);\n            var marker = new this.props.google.maps.Marker({\n                position: myLatlng,\n                title: this.state.markers.hasOwnProperty(0) ? \"End\" : \"Start\",\n                map: map,\n                id: this.state.hazardId,\n            });\n            this.state.hazardId += 1;\n          \n          \n            this.state.markers[marker.id] = marker;\n            console.log(this.state)\n            const coordsStart = {\n              lat: this.state.markers[this.state.hazardId-2].getPosition().lat(),\n              lng: this.state.markers[this.state.hazardId-2].getPosition().lng(),\n            };\n\n            const coordsEnd = {\n              lat: this.state.markers[this.state.hazardId-1].getPosition().lat(),\n              lng: this.state.markers[this.state.hazardId-1].getPosition().lng(),\n            };\n\n\n            const directionsService = new this.props.google.maps.DirectionsService();\n            const directionsDisplay = new this.props.google.maps.DirectionsRenderer();\n            //put directions renderer to render in the map\n            directionsDisplay.setMap(map);\n\n        //     //changing  request\n            const request = {\n              origin: coordsStart,\n              waypoints: [],\n              destination: coordsEnd,\n              travelMode: \"WALKING\",\n            };\n            const tempLocation = {\"start\" : coordsStart, \"end\": coordsEnd};\n            const serverParams = {\n              \"creator\" : \"Andrei\",\n              \"location\" : tempLocation,\n              \"type\" : \"construction\",\n              \"description\" : \"there is a lot of construction causing a back up\"\n\n            }\n            const serverRequest = {\n              method : \"POST\",\n              headers: { 'Content-Type': 'application/json' },\n              body : JSON.stringify(serverParams)\n\n            }\n            // //creating new directions request\n            if (this.state.coords[0] !== null &&this.state.coords[1] !== null) {\n                directionsService.route(request, function (result, status) {\n                    if (status == \"OK\") {\n                        directionsDisplay.setDirections(result);\n                    }\n                });\n                fetch(\"http://localhost:8080/api/reports\", serverRequest)\n                .then(response => response.json())\n                .then(data => console.log(\"andrei\", data))\n            }\n          }\n        \n        console.log(Object.keys(this.state.markers).length);\n    };\n  \n  \n    render() {\n  \n      return (\n        <div>\n          <Map\n            className=\"map\"\n            initialCenter={{ lat: 42.354310, lng: -71.091311 }}\n            google={this.props.google}\n            onClick={this.onMapClick}\n            onReady={this.onMapReady}\n            style={{width: \"85%\", height: \"100%\", position: \"relative\"}}\n            containerStyle={{position: \"fixed\", width: \"100%\", height:\"90%\", marginTop:\"10vh\"}}\n            zoom={15}\n          >\n          </Map>\n          \n          <div style={{ width: 500, height: 500 }} id={this.props.id} />\n          <div id=\"infowindow-content\">\n            <img src=\"\" width=\"16\" height=\"16\" id=\"place-icon\" />\n            <span id=\"place-name\" className=\"title\"></span>\n            <br />\n            <span id=\"place-address\"></span>\n            <br />\n            <span id=\"place-coord\"></span>\n          </div>\n        </div>\n      );\n    }\n  }\n\nexport default GoogleApiWrapper({\n  apiKey: 'AIzaSyBAVWVu8_U0FfwgBiHVN3q-G5uCQNBAj7Y'\n})(HazardsMap);"]},"metadata":{},"sourceType":"module"}